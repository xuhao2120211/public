<admintpl file="header"/>
</head>
<body>
	<div class="wrap js-check-wrap">
		<ul class="nav nav-tabs">
			<li class="active"><a href="{:U('Indexadmin/useradd')}">添加用户</a></li>
		</ul>
		
		<form class="form-horizontal js-ajax-form" action="{:U('Rbac/roleadd_post')}" 

method="post">
			<fieldset>
				<div class="control-group">
					<label class="control-label">用户名</label>
					<div class="controls">
						<input type="text" name="name" value="" 

id="nameadd"/>
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">用户密码</label>
					<div class="controls">
						<input type="password" name="name" value="" 

id="pwaadd"/>
						<span class="form-required">*</span>
					</div>
				</div>
				<div class="control-group">
					<label class="control-label">确认密码</label>
					<div class="controls">
						<input type="password" name="name" value="" 

id="pwaaddq"/>
						<span class="form-required">*</span>
					</div>
				</div>
				
			</fieldset>
			<div class="form-actions">
				<a href='javascript:void(0)' class="btn btn-primary " 

onclick='nameadd()'>确认</a>
			</div>
		</form>
	</div>
	<script src="__PUBLIC__/js/common.js"></script>


	<script>
    //这里是添加用户异步
	function nameadd(){
		var name =	$('#nameadd').val().trim();
	    var pwa =   $('#pwaadd').val().trim();
	    var pwa2 = $('#pwaaddq').val().trim(); 

           if(!name){
       	        alert('请填写用户名');
       	        return;
           }

           if(!pwa){
                alert('请填写密码');
                return;
           }

           if(!pwa2){
       	        alert('请填写确认密码');
       	        return;
           }

           if(pwa !== pwa2){
       	      alert('两次密码输入不一致');
       	      return;
           }

            $.ajax({ 
            async:false,
            url: "{:U('Indexadmin/useradddata')}",
            type:"post",
            dataType:"json",
            data:{name:name,pwa:pwa,pwa2:pwa2},
            success:function(msg){
                if(msg){ 
                   if(msg.status == 1){
                      alert('添加成功');
                      location.reload() 
                   }else{
                      alert('添加失败');
                      location.reload() 
                   }
                }       
            }
        });

	}

	</script>
</body>
</html>
